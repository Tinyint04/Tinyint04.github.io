<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Animación de Niveles</title>
  <link rel="stylesheet" href="./CSS/style-Inicio.css">
</head>

<body>
  <div class="curtain left" style="display: none;"></div>
  <div class="curtain right" style="display: none;"></div>

  <div class="container" id="levels-container">
    <div class="level active" id="level1" onclick="startLevel(1)">1</div>
    <div class="level disabled" id="level2">2</div>
    <div class="level disabled" id="level3">3</div>
    <div class="level disabled" id="level4">4</div>
    <div class="level disabled" id="level5">5</div>
  </div>

  <div class="button-container" id="restart-container">
    <button onclick="restart()">Reiniciar</button>
  </div>

  <script>
    let currentLevel = 1;
    const levels = document.querySelectorAll(".level");
    const leftCurtain = document.querySelector(".curtain.left");
    const rightCurtain = document.querySelector(".curtain.right");
    const levelsContainer = document.getElementById("levels-container");
    const restartContainer = document.getElementById("restart-container");

    function startLevel(level) {
      if (level !== currentLevel) return;
      leftCurtain.style.display = "block";
      rightCurtain.style.display = "block";
      setTimeout(() => {
        closeCurtain();
      }, 500);
      setTimeout(() => {
        levelsContainer.classList.add("hidden");
        restartContainer.style.display = "block";
        openCurtain();
      }, 1500);
      // Si se pulsa el nivel 1, redirige a page-main.html después de la animación
      if (level === 1) {
        setTimeout(() => {
          window.location.href = "juego.html";
        }, 2800);
      }
    }

    function closeCurtain() {
      leftCurtain.style.transform = "translateX(0)";
      rightCurtain.style.transform = "translateX(0)";
    }

    function openCurtain() {
      setTimeout(() => {
        leftCurtain.style.transform = "translateX(-102%)";
        rightCurtain.style.transform = "translateX(102%)";
      }, 1000);
      setTimeout(() => {
        leftCurtain.style.display = "none";
        rightCurtain.style.display = "none";
      }, 2200);
    }

    function restart() {
      leftCurtain.style.display = "block";
      rightCurtain.style.display = "block";
      setTimeout(() => {
        closeCurtain();
      }, 500);
      setTimeout(() => {
        restartContainer.style.display = "none";
        levelsContainer.classList.remove("hidden");
        openCurtain();
        setTimeout(() => {
          activateNextLevel();
        }, 2200);
      }, 1500);
    }

    function activateNextLevel() {
      if (currentLevel < levels.length) {
        levels[currentLevel - 1].classList.remove("active");
        levels[currentLevel - 1].classList.add("disabled");
        currentLevel++;
        levels[currentLevel - 1].classList.remove("disabled");
        levels[currentLevel - 1].classList.add("active");
        levels[currentLevel - 1].setAttribute("onclick", `startLevel(${currentLevel})`);
      }
    }
  </script>
</body>

</html>
